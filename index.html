<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI vs Human Essays Narrative Visualization</title>
<script src="https://d3js.org/d3.v6.min.js"></script>
<style>
  body { font-family: sans-serif; }
  .chart { margin: 20px auto; width: 800px; }
  .annotation { font-size: 14px; fill: #333; }
  button { margin: 5px; padding: 8px 12px; cursor: pointer; }
</style>
</head>
<body>
<h1>AI vs Human Essays</h1>
<div>
  <button onclick="showScene(1)">Scene 1: Overview</button>
  <button onclick="showScene(2)">Scene 2: Word Count</button>
  <button onclick="showScene(3)">Scene 3: Top Words</button>
</div>
<svg id="viz" class="chart" width="800" height="500"></svg>

<script>
const svg = d3.select("#viz");
const width = +svg.attr("width"), height = +svg.attr("height");

// Data from our analysis
const scene1Data = [
  {Type: "Human", Count: 1375, Percent: 94.2},
  {Type: "AI", Count: 85, Percent: 5.8}
];

const scene2Data = [
  {Type: "Human", AvgWordCount: 556.8},
  {Type: "AI", AvgWordCount: 187.6}
];

const scene3Data = {
  AI: [
    {word: "with", freq: 131},
    {word: "that", freq: 85},
    {word: "from", freq: 76},
    {word: "this", freq: 67},
    {word: "energy", freq: 62}
  ],
  Human: [
    {word: "that", freq: 11219},
    {word: "electoral", freq: 7221},
    {word: "people", freq: 6920},
    {word: "have", freq: 6464},
    {word: "college", freq: 6072}
  ]
};

function clearViz() {
  svg.selectAll("*").remove();
}

function showScene(scene) {
  clearViz();
  if (scene === 1) {
    const x = d3.scaleBand().domain(scene1Data.map(d => d.Type)).range([100, width-100]).padding(0.4);
    const y = d3.scaleLinear().domain([0, d3.max(scene1Data, d => d.Percent)]).range([height-100, 50]);

    svg.selectAll("rect").data(scene1Data).enter()
      .append("rect")
      .attr("x", d => x(d.Type))
      .attr("y", d => y(d.Percent))
      .attr("width", x.bandwidth())
      .attr("height", d => height-100 - y(d.Percent))
      .attr("fill", "steelblue");

    svg.selectAll("text.label").data(scene1Data).enter()
      .append("text")
      .attr("class", "label")
      .attr("x", d => x(d.Type) + x.bandwidth()/2)
      .attr("y", d => y(d.Percent) - 5)
      .attr("text-anchor", "middle")
      .text(d => `${d.Percent}%`);

    svg.append("text").attr("class", "annotation").attr("x", 100).attr("y", 30)
      .text("Human-written essays dominate the dataset.");

    svg.append("g").attr("transform", `translate(0,${height-100})`).call(d3.axisBottom(x));
    svg.append("g").attr("transform", `translate(100,0)`).call(d3.axisLeft(y));

  } else if (scene === 2) {
    const x = d3.scaleBand().domain(scene2Data.map(d => d.Type)).range([100, width-100]).padding(0.4);
    const y = d3.scaleLinear().domain([0, d3.max(scene2Data, d => d.AvgWordCount)]).range([height-100, 50]);

    svg.selectAll("rect").data(scene2Data).enter()
      .append("rect")
      .attr("x", d => x(d.Type))
      .attr("y", d => y(d.AvgWordCount))
      .attr("width", x.bandwidth())
      .attr("height", d => height-100 - y(d.AvgWordCount))
      .attr("fill", "orange");

    svg.selectAll("text.label").data(scene2Data).enter()
      .append("text")
      .attr("class", "label")
      .attr("x", d => x(d.Type) + x.bandwidth()/2)
      .attr("y", d => y(d.AvgWordCount) - 5)
      .attr("text-anchor", "middle")
      .text(d => `${d.AvgWordCount}`);

    svg.append("text").attr("class", "annotation").attr("x", 100).attr("y", 30)
      .text("AI essays are much shorter on average.");

    svg.append("g").attr("transform", `translate(0,${height-100})`).call(d3.axisBottom(x));
    svg.append("g").attr("transform", `translate(100,0)`).call(d3.axisLeft(y));

  } else if (scene === 3) {
    const allWords = scene3Data.AI.map((d,i) => ({group: "AI", ...d}))
      .concat(scene3Data.Human.map((d,i) => ({group: "Human", ...d})));

    const x = d3.scaleBand().domain(allWords.map(d => d.word + d.group)).range([100, width-100]).padding(0.2);
    const y = d3.scaleLinear().domain([0, d3.max(allWords, d => d.freq)]).range([height-100, 50]);

    svg.selectAll("rect").data(allWords).enter()
      .append("rect")
      .attr("x", d => x(d.word + d.group))
      .attr("y", d => y(d.freq))
      .attr("width", x.bandwidth())
      .attr("height", d => height-100 - y(d.freq))
      .attr("fill", d => d.group === "AI" ? "purple" : "green");

    svg.selectAll("text.label").data(allWords).enter()
      .append("text")
      .attr("class", "label")
      .attr("x", d => x(d.word + d.group) + x.bandwidth()/2)
      .attr("y", d => y(d.freq) - 5)
      .attr("text-anchor", "middle")
      .text(d => d.freq);

    svg.append("text").attr("class", "annotation").attr("x", 100).attr("y", 30)
      .text("AI uses more generic connectors, Humans more topic-specific words.");

    svg.append("g").attr("transform", `translate(0,${height-100})`).call(d3.axisBottom(x).tickFormat(d => d.replace("AI","A").replace("Human","H")));
    svg.append("g").attr("transform", `translate(100,0)`).call(d3.axisLeft(y));
  }
}

// Start with Scene 1
showScene(1);
</script>
</body>
</html>
